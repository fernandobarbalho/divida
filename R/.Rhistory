library(tidyverse)
library(readxl)
raw <- read_excel('prototipo-titulo-tetris.xlsx')
View(raw)
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- i
proc[n, "y"] <- j
}
}
}
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- i
proc[n, "y"] <- j
n <- n+1
}
}
}
View(proc)
proc_treated <- proc %>%
arrange(piece)
View(proc_treated)
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j
proc[n, "y"] <- i
n <- n+1
}
}
}
proc_treated <- proc %>%
arrange(piece)
111/18
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j-1
proc[n, "y"] <- i-1
n <- n+1
}
}
}
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
))
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d)
)
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = '')
)
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = '', sep = ' ')
)
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = ' ')
)
library(jsonlite)
jsonlite::write_json(proc_treated, '../abertura.json')
round(41/2,0)
raw <- read_excel('prototipo-titulo-tetris.xlsx')
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j-1
proc[n, "y"] <- i-1
proc[n, "transform"] <- roun(ncol/2, 0) - (j-1)
n <- n+1
}
}
}
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j-1
proc[n, "y"] <- i-1
proc[n, "transform"] <- round(ncol/2, 0) - (j-1)
n <- n+1
}
}
}
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = ' ')
)
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j-1
proc[n, "y"] <- i-1
proc[n, "transform"] <- round(ncol(raw)/2, 0) - (j-1)
n <- n+1
}
}
}
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = ' ')
)
jsonlite::write_json(proc_treated, '../abertura.json')
View(proc_treated)
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = ' '),
transform = first(transform)
)
jsonlite::write_json(proc_treated, '../abertura.json')
jsonlite::write_json(proc_treated, '../abertura.json')
library(tidyverse)
library(readxl)
library(jsonlite)
raw <- read_excel('prototipo-titulo-tetris.xlsx', sheets = 'tetris')
raw <- read_excel('prototipo-titulo-tetris.xlsx', sheet = 'tetris')
piece_info <- read_excel('prototipo-titulo-tetris.xlsx', sheet = 'tab-tipos')
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j-1
proc[n, "y"] <- i-1
proc[n, "transform"] <- round(ncol(raw)/2, 0) - (j-1)
n <- n+1
}
}
}
View(proc)
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = ' '),
transform = first(transform)
)
View(piece_info)
piece_info %>% count(piece)
piece_info %>% count(piece) %>% filter(n>1)
piece_info %>% count(tipo)
proc_with_piece_info <- proc_treated %>%
left_join(piece_info)
jsonlite::write_json(proc_with_piece_info, '../abertura.json')
raw <- read_excel('prototipo-titulo-tetris.xlsx', sheet = 'tetris')
piece_info <- read_excel('prototipo-titulo-tetris.xlsx', sheet = 'tab-tipos')
proc <- data.frame()
n <- 1
for (i in 1:nrow(raw)) {
for (j in 1:ncol(raw)) {
if (!is.na(raw[i,j])) {
proc[n, "piece"] <- raw[i,j]
proc[n, "x"] <- j-1
proc[n, "y"] <- i-1
proc[n, "transform"] <- round(ncol(raw)/2, 0) - (j-1)
n <- n+1
}
}
}
proc_treated <- proc %>%
arrange(piece) %>%
mutate(d = paste(
"M", x, y,
"H", x + 1,
"V", y + 1,
"H", x,
"V", y
)) %>%
group_by(piece) %>%
summarise(
d = paste(d, collapse = ' '),
transform = first(transform)
)
proc_with_piece_info <- proc_treated %>%
left_join(piece_info)
jsonlite::write_json(proc_with_piece_info, '../abertura.json')
View(proc_with_piece_info)
